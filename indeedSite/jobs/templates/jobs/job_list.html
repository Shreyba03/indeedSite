{% extends "base.html" %}

{% block title %}IndeedLite - Edit Skills{% endblock %}

{% block content %}
  

  <!-- Main Content -->
  <div class="container mt-5">
    <!-- Page Header -->
    <div class="section-header">
      <i class="fas fa-search"></i>
      Job Search
    </div>
    <div class="section-content">
      <!-- Search Form -->
      <form method="get" action="" class="row g-3 mb-4">
        <div class="col-md-4">
          <label for="title" class="form-label">Job Title</label>
          <input type="text" class="form-control" id="title" name="title" value="{{ request.GET.title }}" placeholder="e.g. Software Engineer">
        </div>
        <div class="col-md-4">
          <label for="skills" class="form-label">Skills</label>
          <input type="text" class="form-control" id="skills" name="skills" value="{{ request.GET.skills }}" placeholder="e.g. Python, React">
        </div>
        <div class="col-md-4">
          <label for="location" class="form-label">Location</label>
          <input type="text" class="form-control" id="location" name="location" value="{{ request.GET.location }}" placeholder="e.g. Atlanta, GA">
        </div>
        <div class="col-md-3">
          <label for="salary_min" class="form-label">Min Salary</label>
          <input type="number" class="form-control" id="salary_min" name="salary_min" value="{{ request.GET.salary_min }}" placeholder="50000">
        </div>
        <div class="col-md-3">
          <label for="salary_max" class="form-label">Max Salary</label>
          <input type="number" class="form-control" id="salary_max" name="salary_max" value="{{ request.GET.salary_max }}" placeholder="100000">
        </div>
        <div class="col-md-3">
          <div class="form-check mt-4">
            <input class="form-check-input" type="checkbox" id="remote" name="remote" value="1" {% if request.GET.remote %}checked{% endif %}>
            <label class="form-check-label" for="remote">
              Remote Work
            </label>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-check mt-4">
            <input class="form-check-input" type="checkbox" id="visa" name="visa" value="1" {% if request.GET.visa %}checked{% endif %}>
            <label class="form-check-label" for="visa">
              Visa Sponsorship
            </label>
          </div>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-search"></i>
            Search Jobs
          </button>
          <a href="{% url 'home.index' %}" class="btn btn-secondary ms-2">
            <i class="fas fa-home"></i>
            Back to Home
          </a>
        </div>
      </form>
    </div>

    <!-- Job Results -->
    {% if jobs %}
      <div class="section-header mt-4">
        <i class="fas fa-briefcase"></i>
        Available Jobs ({{ jobs|length }} found)
      </div>
      <div class="section-content">
        <div class="row">
          {% for job in jobs %}
            <div class="col-lg-6 mb-4">
              <div class="job-card">
                <div class="d-flex justify-content-between align-items-start mb-3">
                  <div>
                    <h5 class="job-title">{{ job.title }}</h5>
                    <p class="text-muted mb-1">
                      <i class="fas fa-building text-gt-gold"></i>
                      {{ job.company }}
                    </p>
                    <p class="text-muted mb-1">
                      <i class="fas fa-map-marker-alt text-gt-gold"></i>
                      {{ job.location }}
                    </p>
                  </div>
                  <div class="text-end">
                    <span class="job-salary">${{ job.salary_min|floatformat:0 }} - ${{ job.salary_max|floatformat:0 }}</span>
                  </div>
                </div>
                
                {% if job.skills_required %}
                  <div class="mb-3">
                    <small class="text-muted">Required Skills:</small>
                    <div class="mt-1">
                      <span class="badge bg-gt-gold me-1">{{ job.skills_required }}</span>
                    </div>
                  </div>
                {% endif %}
                
                <div class="d-flex flex-wrap gap-2 mb-3">
                  {% if job.remote %}
                    <span class="badge bg-success">
                      <i class="fas fa-home"></i>
                      Remote
                    </span>
                  {% endif %}
                  {% if job.visa_sponsorship %}
                    <span class="badge bg-info">
                      <i class="fas fa-passport"></i>
                      Visa Sponsorship
                    </span>
                  {% endif %}
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                  <a href="{% url 'job_detail' job.id %}" class="btn btn-primary">
                    <i class="fas fa-eye"></i>
                    View Details
                  </a>
                  {% if user.is_authenticated %}
                    <a href="{% url 'apply_to_job' job.id %}" class="btn btn-success">
                      <i class="fas fa-paper-plane"></i>
                      Apply Now
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% else %}
      <div class="section-header mt-4">
        <i class="fas fa-search"></i>
        Search Results
      </div>
      <div class="section-content">
        <div class="alert alert-info text-center" role="alert">
          <i class="fas fa-info-circle fa-2x mb-3 text-gt-gold"></i>
          <h4>No jobs found</h4>
          <p>Try adjusting your search criteria or check back later for new job postings.</p>
          <a href="{% url 'home.index' %}" class="btn btn-primary">
            <i class="fas fa-home"></i>
            Back to Home
          </a>
        </div>
      </div>
    {% endif %}
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
{% endblock content %}
